<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeRide Parent Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Leaflet Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-left">
                <h1 class="logo">
                    <i class="fas fa-bus"></i>
                    SafeRide Parent Dashboard
                </h1>
            </div>
            <div class="nav-center">
                <div class="child-selector">
                    <select id="childSelect">
                        <option value="child1">Sophia Kumar</option>
                        <option value="child2">Arjun Kumar</option>
                    </select>
                </div>
            </div>
            <div class="nav-right">
                <button class="nav-btn" id="settingsBtn">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="nav-btn" id="helpBtn">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard Content -->
    <main class="dashboard">
        <!-- Left Column - Primary Information -->
        <div class="left-column">
            <!-- Live Bus Tracker Widget -->
            <div class="widget bus-tracker-widget">
                <div class="widget-header">
                    <h2><i class="fas fa-map-marker-alt"></i> Live Bus Tracker</h2>
                    <div class="map-controls">
                        <button class="map-control-btn" id="centerMapBtn" title="Center on Bus">
                            <i class="fas fa-crosshairs"></i>
                        </button>
                        <button class="map-control-btn" id="fullscreenBtn" title="Fullscreen">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="widget-content">
                    <div class="map-container" id="mapContainer">
                        <div id="busMap" class="bus-map"></div>
                        <div class="map-overlay">
                            <div class="bus-info">
                                <div class="bus-id">Bus #MH12AB1234</div>
                                <div class="route-info">Route: Home â†’ School</div>
                                <div class="speed-info">
                                    <i class="fas fa-tachometer-alt"></i>
                                    <span id="currentSpeed">42 km/h</span>
                                </div>
                            </div>
                            <div class="route-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 65%"></div>
                                </div>
                                <span class="progress-text"></span>
                            </div>
                        </div>
                    </div>
                    <div class="eta-display">
                        <div class="eta-time">
                            <span class="time">7:58 AM</span>
                            <span class="label">ETA to Child's Stop</span>
                        </div>
                        <div class="distance">
                            <i class="fas fa-route"></i>
                            <span id="distanceToStop">2.3 km away</span>
                        </div>
                    </div>
                    <div class="map-legend">
                        <div class="legend-item">
                            <span class="legend-icon bus-icon"></span>
                            <span>Live Bus Location</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-icon stop-icon"></span>
                            <span>Child's Stop</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-icon route-line"></span>
                            <span>Planned Route</span>
                        </div>
                    </div>
                    <button class="view-route-btn">View Full Route History</button>
                </div>
            </div>

            <!-- Driver Behavior Summary Widget -->
            <div class="widget driver-behavior-widget">
                <div class="widget-header">
                    <h2><i class="fas fa-tachometer-alt"></i> Driver Behavior</h2>
                </div>
                <div class="widget-content">
                    <div class="behavior-score">
                        <div class="score-ring" data-score="92">
                            <div class="score-number">92</div>
                            <div class="score-text">Safe Driver Score</div>
                        </div>
                        <div class="score-status good">Excellent</div>
                    </div>
                    <div class="behavior-indicators">
                        <div class="indicator good" title="Smooth Acceleration">
                            <i class="fas fa-arrow-up"></i>
                            <span>2</span>
                        </div>
                        <div class="indicator warning" title="Hard Braking">
                            <i class="fas fa-hand-paper"></i>
                            <span>1</span>
                        </div>
                        <div class="indicator good" title="Sharp Turns">
                            <i class="fas fa-undo"></i>
                            <span>0</span>
                        </div>
                        <div class="indicator good" title="Speed Violations">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>0</span>
                        </div>
                    </div>
                    <button class="view-report-btn">View Full Report</button>
                </div>
            </div>
        </div>

        <!-- Right Column - Secondary Information & Actions -->
        <div class="right-column">
            <!-- Alerts & Notifications Widget -->
            <div class="widget alerts-widget">
                <div class="widget-header">
                    <h2><i class="fas fa-bell"></i> Alerts & Notifications</h2>
                    <span class="notification-count">3</span>
                </div>
                <div class="widget-content">
                    <div class="alerts-list">
                        <div class="alert-item recent">
                            <div class="alert-icon good">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="alert-content">
                                <div class="alert-text">Bus entering school zone</div>
                                <div class="alert-time">2 minutes ago</div>
                            </div>
                        </div>
                        <div class="alert-item">
                            <div class="alert-icon success">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="alert-content">
                                <div class="alert-text">Sophia de-boarded safely</div>
                                <div class="alert-time">Yesterday 3:45 PM</div>
                            </div>
                        </div>
                        <div class="alert-item">
                            <div class="alert-icon warning">
                                <i class="fas fa-pause-circle"></i>
                            </div>
                            <div class="alert-content">
                                <div class="alert-text">Unexpected stop detected</div>
                                <div class="alert-time">Yesterday 8:15 AM</div>
                            </div>
                        </div>
                    </div>
                    <div class="quick-actions">
                        <button class="action-btn primary" id="contactDriver">
                            <i class="fas fa-phone"></i> Contact Driver
                        </button>
                        <button class="action-btn secondary" id="messageSchool">
                            <i class="fas fa-envelope"></i> Message School
                        </button>
                    </div>
                </div>
            </div>

            <!-- Child Status & Communication Widget -->
            <div class="widget child-status-widget">
                <div class="widget-header">
                    <h2><i class="fas fa-child"></i> Child Status</h2>
                </div>
                <div class="widget-content">
                    <div class="child-info">
                        <div class="child-avatar">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IiM2MzY2RjEiLz4KPGJ0ZXh0IHg9IjUwJSIgeT0iNTAlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSIgZm9udC1mYW1pbHk9IkludGVyIiBmb250LXNpemU9IjE4IiBmb250LXdlaWdodD0iNjAwIiBmaWxsPSJ3aGl0ZSI+UzwvdGV4dD4KPHN2Zz4K" alt="Sophia">
                        </div>
                        <div class="child-details">
                            <div class="child-name">Sophia Kumar</div>
                            <div class="child-status on-bus">
                                <i class="fas fa-bus"></i>
                                On Bus
                            </div>
                        </div>
                    </div>
                    <div class="communication-buttons">
                        <button class="comm-btn driver">
                            <i class="fas fa-user-tie"></i>
                            Message Driver
                        </button>
                        <button class="comm-btn school">
                            <i class="fas fa-school"></i>
                            Message School
                        </button>
                    </div>
                    <div class="emergency-contacts">
                        <button class="emergency-btn">
                            <i class="fas fa-phone-alt"></i>
                            Emergency Contact
                        </button>
                    </div>
                </div>
            </div>

            <!-- Maintenance & Safety Widget -->
            <div class="widget maintenance-widget">
                <div class="widget-header">
                    <h2><i class="fas fa-tools"></i> Maintenance & Safety</h2>
                </div>
                <div class="widget-content">
                    <div class="safety-score">
                        <div class="safety-shield good">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="safety-text">
                            <div class="safety-status">Safety Certified</div>
                            <div class="safety-subtitle">All checks passed</div>
                        </div>
                    </div>
                    <div class="maintenance-info">
                        <div class="maintenance-item">
                            <span class="label">Last Service:</span>
                            <span class="value">Oct 28, 2025</span>
                        </div>
                        <div class="maintenance-item">
                            <span class="label">Next Service:</span>
                            <span class="value">Nov 28, 2025</span>
                        </div>
                    </div>
                    <button class="maintenance-log-btn">View Maintenance Log</button>
                </div>
            </div>

            <!-- Weekly Analytics Widget -->
            <div class="widget analytics-widget">
                <div class="widget-header">
                    <h2><i class="fas fa-chart-line"></i> Weekly Analytics</h2>
                </div>
                <div class="widget-content">
                    <div class="analytics-chart">
                        <canvas id="weeklyChart" width="300" height="150"></canvas>
                    </div>
                    <div class="analytics-metrics">
                        <div class="metric">
                            <span class="metric-value">45.2</span>
                            <span class="metric-label">Avg Speed (km/h)</span>
                        </div>
                        <div class="metric">
                            <span class="metric-value">156</span>
                            <span class="metric-label">Total Distance (km)</span>
                        </div>
                        <div class="metric">
                            <span class="metric-value">3</span>
                            <span class="metric-label">Total Incidents</span>
                        </div>
                    </div>
                    <button class="detailed-analytics-btn">View Detailed Analytics</button>
                </div>
            </div>

            <!-- Bus Occupancy Widget -->
            <div class="widget occupancy-widget">
                <div class="widget-header">
                    <h2><i class="fas fa-users"></i> Bus Occupancy</h2>
                </div>
                <div class="widget-content">
                    <div class="occupancy-gauge">
                        <div class="gauge-container">
                            <div class="gauge-fill" style="width: 65%"></div>
                        </div>
                        <div class="occupancy-text">
                            <span class="occupancy-percent">65%</span>
                            <span class="occupancy-seats">(20/30 Seats)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal for detailed views -->
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Details</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
